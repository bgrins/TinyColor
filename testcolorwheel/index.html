<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Color wheel test</title>
</head>
<body>
    <div id="outOfRange"></div>
    <div id="normalized"></div>

    <script type='text/javascript' src="../tinycolor.js"></script>
    <script type='text/javascript'>//<![CDATA[

/* Color circle:
 * Tinycolor.js does not accept
 * out-of-range hues.
 * Adding a random amount to the hue value
 * can cause it to go outside of its 0-360 range
 * To avoid this, and maintain a color circle,
 * values outside the scale should be reassigned.
 * In this example,
 * the out-of-range hue can be any numerical
 * value, even if it is negative.
 * The same functionality can be added to the
 * .spin() method.
 */

// Test cdn
// https://rawgit.com/bgrins/TinyColor/master/tinycolor.js
// Production cdn
// https://cdn.jsdelivr.net/tinycolor/1.2.1/tinycolor-min.js

var outOfRangeHue = -700;

// Core function to add to tinycolor.js
function normalizeOutOfRangeHue(m1) {
    return m1 < 0 ? m1 % 360 + 360 : m1 % 360;
}

// Implement library

function write2doc() {
    // Show output in document
    var normalizedHue;
    outOfRangeHue += 1;
    normalizedHue = normalizeOutOfRangeHue(outOfRangeHue);

    function htmlOutput(hue, hueDesc, rangeId) {
        var hslString = 'hsl ' + hue + ' 100% 50%';
        hueHtml = hueDesc +
            hue + '<br>' +
            tinycolor(hslString).toHslString();
        document.getElementById(rangeId)
            .style
            .backgroundColor = tinycolor(hslString).toRgbString();
        document.getElementById(rangeId)
            .innerHTML = hueHtml;
    }
    htmlOutput(outOfRangeHue, 'Out-of-range hue: ', 'outOfRange');
    htmlOutput(normalizedHue, 'Normalized hue: ', 'normalized');
}
setInterval(write2doc, 10);
        
//]]></script>

</body>
</html>

